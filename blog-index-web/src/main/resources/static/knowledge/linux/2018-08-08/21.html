<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行</title>
<meta name="keywords" content="Linux,SVN,Apache" />
<meta name="description" content="Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="../../../skin/public/js/jquery.min.js" ></script>
<script src="../../../skin/public/js/hc-sticky.js"></script>
<script src="../../../skin/public/js/comm.js"></script>
<link href="../../../skin/public/css/index.css" rel="stylesheet">
<script type="text/javascript" src="../../../skin/public/js/ajax.js"></script>
</head>
<body>
<header>
    <div class="logo">
        <h1><a href="index.html">Mr · 王</a></h1>
        <span>花若盛开，清风自来。</span>
    </div>
    <nav>
        <h2 id="mnavh"><span class="navicon"></span></h2>
        <ul id="starlist">

            <li><a href="index.html">首页</a></li>

            <li ><a href="knowledge/se.html">技术博客</a>
                <ul class="sub">
                    <li><a href="knowledge/db/db.html" >数据库</a></li>
                    <li><a href="knowledge/linux/linux.html" >Linux</a></li>
                    <li><a href="knowledge/java/java.html" >Java</a></li>
                </ul>
            </li>


            <li ><a href="life/life.html">生活杂谈</a>
                <ul class="sub">
                    <li><a href="life/we/we.html" >网络来源</a></li>
                    <li><a href="life/ez/ez.html" >随笔</a></li>
                    <li><a href="life/es/es.html" >语录</a></li>
                </ul>
            </li>


            <li ><a href="share/share.html">资源分享</a>
                <ul class="sub">
                    <li><a href="share/em/em.html" >建站那些事</a></li>
                    <li><a href="share/eb/eb.html" >Bug修复</a></li>
                    <li><a href="share/ec/ec.html" >源码分析</a></li>
                </ul>
            </li>


            <li ><a href="pe/pe.html">网站介绍</a></li>

            <li ><a href="common/about-me.html">关于我</a></li>

            <li><a href="common/time-axis.html">时间轴</a></li>

            <li><a href="common/gbook.html">留言</a></li>
        </ul>
    </nav>
</header>
<div class="blank"></div>
<aside>
  <div class="newsbox">
    <h2 class="hometitle">推荐</h2>
    <ul class="news">
<li><a href="21.html" title="Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行">Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行</a></li><li><a href="../../java/2018-07-26/20.html" title="JaveWeb学习之Servlet（二）：ServletConfig和ServletContext">JaveWeb学习之Servlet（二）：ServletConfig和ServletContext</a></li><li><a href="../../java/2018-07-22/19.html" title="JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制">JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制</a></li><li><a href="../../java/2018-06-29/18.html" title="Cglib动态代理浅析">Cglib动态代理浅析</a></li><li><a href="../../java/2018-06-29/17.html" title="JDK动态代理浅析">JDK动态代理浅析</a></li>    </ul>
  </div>
  <div class="search">
    <form action="../../../tags/search/index.htm" method="post" name="searchform" id="searchform">
      <input name="keyboard" id="keyboard" class="input_text" value="请输入关键字词" style="color: rgb(153, 153, 153);" onfocus="if(value=='请输入关键字词'){this.style.color='#000';value=''}" onblur="if(value==''){this.style.color='#999';value='请输入关键字词'}" type="text">
      <input name="show" value="title" type="hidden">
      <input name="tempid" value="1" type="hidden">
      <input name="tbname" value="news" type="hidden">
      <input name="Submit" class="input_submit" value="搜索" type="submit">
    </form>
  </div>
  <div class="newsbox">
    <h2 class="hometitle">标签云</h2>
      <ul class="cloud">
        <a href="../../../tags/tags.html" target="_blank">SVN</a> <a href="../../../tags/tags/tags_3.html" target="_blank">JavaWeb</a> <a href="../../../tags/tags/tags_6.html" target="_blank">Servlet</a> <a href="../../../tags/tags/tags_2.html" target="_blank">导出</a> <a href="../../../tags/tags/tags_5.html" target="_blank">导入</a> <a href="../../../tags/tags/tags_4.html" target="_blank">Excel</a> <a href="../../../tags/tags/tags_8.html" target="_blank">Jxl</a> <a href="../../../tags/tags/tags_9.html" target="_blank">Jar</a> <a href="../../../tags/tags/tags_7.html" target="_blank">Apache</a> <a href="../../../tags/tags/tags_12.html" target="_blank">命令</a> <a href="../../../tags/tags/tags_10.html" target="_blank">服务器</a> <a href="../../../tags/tags/tags_11.html" target="_blank">论坛</a> <a href="../../../tags/tags/tags_14.html" target="_blank">Discuz</a> <a href="../../../tags/tags/tags_24.html" target="_blank">构建</a> <a href="../../../tags/tags/tags_17.html" target="_blank">Maven</a> <a href="../../../tags/tags/tags_13.html" target="_blank">Jenkins</a> <a href="../../../tags/tags/tags_15.html" target="_blank">文件上传</a> <a href="../../../tags/tags/tags_16.html" target="_blank">Nginx</a> <a href="../../../tags/tags/tags_20.html" target="_blank">MySQL</a> <a href="../../../tags/tags/tags_18.html" target="_blank">环境</a> <a href="../../../tags/tags/tags_21.html" target="_blank">安装</a> <a href="../../../tags/tags/tags_19.html" target="_blank">PHP</a> <a href="../../../tags/tags/tags_22.html" target="_blank">Linux</a> <a href="../../../tags/tags/tags_23.html" target="_blank">JDK</a>      </ul>
  </div>
  <div class="newsbox">
    <h2 class="hometitle">阅读排行</h2>
    <ul class="news">
<li><a href="../../java/2018-07-22/19.html" title="JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制">JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制</a></li><li><a href="../../java/2018-06-29/18.html" title="Cglib动态代理浅析">Cglib动态代理浅析</a></li><li><a href="../../java/2018-07-26/20.html" title="JaveWeb学习之Servlet（二）：ServletConfig和ServletContext">JaveWeb学习之Servlet（二）：ServletConfig和ServletContext</a></li><li><a href="../../java/2018-06-29/17.html" title="JDK动态代理浅析">JDK动态代理浅析</a></li><li><a href="../../java/2018-06-29/16.html" title="浅析Java中的final关键字">浅析Java中的final关键字</a></li><li><a href="21.html" title="Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行">Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行</a></li><li><a href="../../../life/we/2018-08-08/23.html" title="一个JAVA程序员成长之路分享 [转载]">一个JAVA程序员成长之路分享 [转载]</a></li><li><a href="../2018-06-29/12.html" title="Linux系统MySQL源码安装学习记录">Linux系统MySQL源码安装学习记录</a></li>    </ul>
  </div>
  <div class="newsbox">
    <h2 class="hometitle">友情链接</h2>
    <ul class="links">
        <li><a href="#" title="个人博客1">个人博客1</a></li><li><a href="#" title="个人博客2">个人博客2</a></li><li><a href="#" title="个人博客3">个人博客3</a></li><li><a href="#" title="个人博客4">个人博客4</a></li><li><a href="#" title="个人博客5">个人博客5</a></li>    </ul>
  </div>
</aside>
<main>
 <div class="weizhi">您现在的位置是：<a href="../../../index.html">首页</a>&nbsp;>&nbsp;<a href="../../se.html">学无止境</a>&nbsp;>&nbsp;<a href="../linux.html">Linux</a></div>
 <div class="infosbox">
    <h1 class="infotitle">Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行</h1>
    <p class="bloginfo"><span><a href='mailto:xianjian-mail@qq.com'></a></span><span>2018-08-08</span><span>Linux</span><span>阅读(<script src="../../../tags/public/ViewClick/ViewClick_10.html"></script>)</span></p>
    <div class="tags"><a href="../../../tags/tags/tags_22.html" target="_blank">Linux</a> &nbsp; <a href="../../../tags/tags.html" target="_blank">SVN</a> &nbsp; <a href="../../../tags/tags/tags_7.html" target="_blank">Apache</a></div>
    <div class="news_about"> <strong>简介</strong> 作为一名程序员，版本控制工具肯定是接触的非常多的，国内公司一般用的是Git个SVN，我比较常用的是SVN，SVN全程Subversion，是一个自由开源的版本控制系统，SVN有两种运行方式：独立服务器和结合Apache运行，今天就分别就这两种运行方式做一下分析和测试 </div>
    <div class="news_con">
      <h2>一、独立服务器运行</h2>
<ol>
<li>
<p>安装是在阿里云ECS上进行</p>
<pre><code>系统：Centos 7  
IP:47.100.199.117  
客户端环境分别是阿里云ECS和本地Windows环境；
</code></pre>

</li>
<li>
<p>安装SVN</p>
<pre><code># 直接使用yum方式安装
yum install -y subversion
# 创建SVN仓库文件夹
mkdir -p /var/svn/repo
# 创建仓库
svnadmin create /var/svn/repo
</code></pre>

</li>
<li>
<p>创建完成之后进入 /var/svn/repo 可以看到如下结构</p>
<pre><code>drwxr-xr-x 2 root root 4096 Aug  7 23:07 conf
drwxr-sr-x 6 root root 4096 Aug  7 23:07 db
-r--r--r-- 1 root root    2 Aug  7 23:07 format
drwxr-xr-x 2 root root 4096 Aug  7 23:07 hooks
drwxr-xr-x 2 root root 4096 Aug  7 23:07 locks
-rw-r--r-- 1 root root  229 Aug  7 23:07 README.txt
</code></pre>

</li>
<li>
<p>进入 /var/svn/repo/conf 目录，这里是SVN的配置文件，包括用户权限和用户密码</p>
<pre><code>-rw-r--r-- 1 root root 1080 Aug  7 23:07 authz
-rw-r--r-- 1 root root  309 Aug  7 23:07 passwd
-rw-r--r-- 1 root root 3090 Aug  7 23:07 svnserve.conf
</code></pre>

</li>
<li>
<p>authz：用户权限的配置文件</p>
<pre><code># 这里是别名，和分组功能类似，这里就不演示
[aliases]
# 用户分组，比如管理员，开发者，普通员工
[groups]
admin = user1,user2
developer = user3,user4
employee = user5,user6

# 目录权限，这里配置的repo根目录，目录分级设置不同的权限也是支持的，多配置几个即可
# 格式 用户 = 权限  r:只读，rw读写； 单个用户直接使用用户名，分组在组名前面加&quot;@&quot;
[repo:/]
@admin = rw
@developer = rw
@employee = r
user7 = rw
user8 = r
# 这里配置的是admin和developer分组拥有读写权限，employee分组仅拥有读权限，用户7和8同理
</code></pre>

</li>
<li>
<p>passwd：用户密码的配置文件</p>
<pre><code>#这个很简单，就是用户名=密码的格式，密码是明文
[users]
user1=user
user2=user
user3=user
...
</code></pre>

</li>
<li>
<p>svnserve.conf：SVN服务进程的配置文件</p>
<pre><code># 配置文件默认全部都是注释掉的，我们把前面4个注释打开，修改第一个匿名用户权限为none
[general]
anon-access = none      #匿名用户无权访问
auth-access = write     #认证用户可读写
password-db = passwd    #指定用户认证密码文件
authz-db = authz        #指定权限配置文件
# realm = My First Repository
# force-username-case = none
[sasl]
# use-sasl = true
# min-encryption = 0
# max-encryption = 256
</code></pre>

</li>
<li>
<p>启动SVN服务</p>
<pre><code># 参数说明： -d 服务后台运行 -r 指定工作目录，只需要指定到根目录，不能指定仓库名；
svnserve -d -r /var/svn
</code></pre>

<p>这种方式运行SVN的访问方式是 svn://ip:3690/仓库名</p>
<p>SVN服务默认端口号是3690，如果有防火墙的注意开启3690端口；
启动服务后导入一些文件到仓库：</p>
<pre><code># -m 参数后面的内容为提交备注
svn import /etc/httpd/ file:///var/svn/repo/ -m 'test'
</code></pre>

</li>
<li>
<p>执行文件检出：</p>
<pre><code>svn checkout svn://47.100.199.117/repo/ /home/
# 首次检出会弹出4次操作
Authentication realm: &lt;svn://47.100.199.117:3690&gt; ddabc309-1877-4d59-9b7b-0bb23f548926
# 第一次可以不输入，直接回车
Password for 'root': 
Authentication realm: &lt;svn://47.100.199.117:3690&gt; ddabc309-1877-4d59-9b7b-0bb23f548926
# 第二次输入用户名
Username: user1
# 第三次输入密码
Password for 'user1': 
-----------------------------------------------------------------------
ATTENTION!  Your password for authentication realm:

   &lt;svn://47.100.199.117:3690&gt; ddabc309-1877-4d59-9b7b-0bb23f548926

can only be stored to disk unencrypted!  You are advised to configure
your system so that Subversion can store passwords encrypted, if
possible.  See the documentation for details.

You can avoid future appearances of this warning by setting the value
of the 'store-plaintext-passwords' option to either 'yes' or 'no' in
'/root/.subversion/servers'.
-----------------------------------------------------------------------
# 是否记住密码，输入yes
Store password unencrypted (yes/no)? yes
A    /home/logs
A    /home/run
A    /home/conf
A    /home/conf/httpd.conf
A    /home/conf/magic
A    /home/conf.d
... ...
</code></pre>

<p>检出完毕</p>
</li>
</ol>
<h2>二、结合Apache运行</h2>
<ol>
<li>
<p>安装SVN同上</p>
<pre><code>yum install -y subversion
</code></pre>

</li>
<li>
<p>安装Apache和mod_dav_svn</p>
<pre><code># SVN和Apache结合使用需要mod_dav_svn模块，用来支持Apache访问SVN；
yum install -y httpd mod_dav_svn
</code></pre>

</li>
<li>
<p>创建仓库并添加配置文件</p>
<pre><code># 创建仓库根目录
mkdir /var/www/svn
# 创建仓库
svnadmin create /var/www/svn/repo
# 复制出一份默认的权限配置文件，进行配置
cp /var/www/svn/repo/conf/authz /var/www/svn/
# 配置用户权限
vim /var/www/svn/authz
# 这里的权限和上面的是一样的，为了测试方便就配置两个，一个只读，一个读写，不使用分组
[aliases]
[groups]
[repo:/]
user9 = rw
user10 = r
# 使用Apache服务工具创建用户和密码文件
# 参数说明： 
#   -c 创建一个加密文件
#   -m 默认采用MD5算法对密码进行加密
#   -b 在命令行中一并输入用户名和密码而不是根据提示输入密码
htpasswd -cmb /var/www/svn/passwd user9 user9
添加第二个用户时去掉 -c 参数，否则文件会被替换而不是追加
htpasswd -mb /var/www/svn/passwd user10 user10
</code></pre>

<p>查看/var/www/svn/passwd文件是否添加成功</p>
<pre><code>user9:$apr1$3mMQAsLC$.AArRpXCm9W0lVST7wa.w1
user10:$apr1$0JCf1pb6$rHMSLloqdr3u.ripdbb0.1
</code></pre>

</li>
<li>
<p>编辑Apache配置文件增加虚拟路径</p>
<pre><code>vim /etc/httpd/conf.d/subversion.conf

# 配置如下内容
LoadModule dav_svn_module modules/mod_dav_svn.so
LoadModule authz_svn_module modules/mod_authz_svn.so
#这里的路径是访问SVN的上下文路径
&lt;Location /svn&gt;
    DAV svn
    # SVN根目录，不带仓库名
    SVNParentPath /var/www/svn
    # 认证类型
    AuthType Basic
    # 登陆时提示内容
    AuthName &quot;subversion login&quot;
    # 用户密码配置文件
    AuthUserFile /var/www/svn/passwd
    # 用户权限配置文件
    AuthzSVNAccessFile /var/www/svn/authz
    # 认证成功的用户可以访问
    Require valid-user
&lt;/Location&gt;
</code></pre>

<p>如果服务器配置了多个虚拟主机，那么虚拟主机配置文件如下<br />
默认路径 vim /etc/httpd/conf.d/subversion.conf</p>
<pre><code>&lt;VirtualHost *:80&gt;
    # 虚拟主机的域名
    ServerName ecs.guitu18.com
    ServerAlias ecs.guitu18.com

    LoadModule dav_svn_module modules/mod_dav_svn.so
    LoadModule authz_svn_module modules/mod_authz_svn.so
    # 这里和配置虚拟路径一样
    &lt;Location /&gt;
        DAV svn
        SVNParentPath /var/www/svn
        AuthType Basic
        AuthName &quot;subversion login&quot;
        AuthUserFile /var/www/svn/passwd
        AuthzSVNAccessFile /var/www/svn/authz
        Require valid-user
    &lt;/Location&gt;

&lt;/VirtualHost&gt;
</code></pre>

</li>
<li>
<p>启动服务</p>
<pre><code># 对/var/www/svn授权apache完全访问
chown -R apache:apache /var/www/svn/
# 启动Apache
service httpd start
</code></pre>

<p>配置完成，Apache方式运行SVN的访问方式是 http://ip/仓库名</p>
</li>
<li>
<p>测试同上，这里就不记录了；结束；</p>
</li>
</ol>    </div>
    <div class="share">
     <p class="diggit"><a href="JavaScript:makeRequest('/e/public/digg/?classid=8&id=21&dotop=1&doajax=1&ajaxarea=diggnum','EchoReturnedText','GET','');"> 很赞哦！ </a>(<b id="diggnum"><script type="text/javascript" src="../../../tags/public/ViewClick/ViewClick_11.html"></script></b>)</p>
</div>
    <div class="nextinfo">
      <p>上一篇：<a href='../2018-06-29/14.html'>Linux 源码安装 PHP</a></p>
      <p>下一篇：<a href='../linux.html'>返回列表</a></p>
    </div>
    <div class="otherlink">
      <h2>相关文章</h2>
      <ul>
<li><a href="../2018-06-29/14.html" title="Linux 源码安装 PHP">Linux 源码安装 PHP</a></li><li><a href="../2018-06-29/12.html" title="Linux系统MySQL源码安装学习记录">Linux系统MySQL源码安装学习记录</a></li><li><a href="../2018-06-29/7.html" title="Linux 源码安装Apache">Linux 源码安装Apache</a></li><li><a href="../2018-06-29/6.html" title="Linux 搭建 Apache + PHP 环境">Linux 搭建 Apache + PHP 环境</a></li><li><a href="../2018-06-29/5.html" title="Linux 修改 rm 命令防止误删操作，增加回收站功能">Linux 修改 rm 命令防止误删操作，增加回收站功能</a></li><li><a href="../2018-06-29/3.html" title="Nginx 静态资源访问 配置的参数说明">Nginx 静态资源访问 配置的参数说明</a></li><li><a href="../../java/2018-06-29/1.html" title="在Jenkins上构建Maven项目时Failed to execute goal org.apache.maven.plugins">在Jenkins上构建Maven项目时Failed to execute goal o</a></li>      </ul>
    </div>
    <div class="news_pl">
      <h2>文章评论</h2>
      <div class="gbko">
        <script>
		  function CheckPl(obj)
		  {
		  if(obj.saytext.value=="")
		  {
		  alert("您没什么话要说吗？");
		  obj.saytext.focus();
		  return false;
		  }
		  return true;
		  }
		  </script><form action="../../../tags/pl/doaction.htm" method="post" name="saypl" id="saypl" onsubmit="return CheckPl(document.saypl)">
<div id="plpost">
<p class="saying"><span><a href="../../../tags/pl/pl_4.html">共有<script type="text/javascript" src="../../../tags/public/ViewClick/ViewClick_12.html"></script>条评论</a></span>来说两句吧...</p>
<p class="yname"><span>用户名:</span><input name="username" type="text" class="inputText" id="username" value="" size="16" /></p>
<p class="yzm"><span>验证码:</span><input name="key" type="text" class="inputText" size="16" />
<img src="http://www.guitu18.com/e/ShowKey/ShowKey.jpg" align="absmiddle" name="plKeyImg" id="plKeyImg" onclick="plKeyImg.src='/e/ShowKey/?v=pl&t='+Math.random()" title="看不清楚,点击刷新" /> </p>
<input name="nomember"  type="hidden" id="nomember" value="1" checked="checked" />
<textarea name="saytext" rows="6" id="saytext"></textarea><input name="imageField" type="submit" value="提交"/>
<input name="id" type="hidden" id="id" value="21" />
<input name="classid" type="hidden" id="classid" value="8" />
<input name="enews" type="hidden" id="enews" value="AddPl" />
<input name="repid" type="hidden" id="repid" value="0" />
<input type="hidden" name="ecmsfrom" value="/se/linux/2018-08-08/21.html"></td>
</div></form>
      </div>
    </div>
  </div>
</main>
<div class="blank"></div>
<footer>
  <p>Design by <a href="http://www.guitu18.com/www_guitu18_default.html"></a> 浙ICP备18008136号-2</p>
</footer>
<a href="21.html#" class="cd-top cd-is-visible cd-fade-out">Top</a><script src="http://www.guitu18.com/e/public/onclick/?enews=donews&amp;classid=8&amp;id=21"></script><link href="../../../skin/highlight/styles/monokai-sublime.css" rel="stylesheet">
<script src="../../../skin/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
