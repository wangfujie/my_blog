<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Java Pattern和Matcher详解 [转载]</title>
<meta name="keywords" content="Java" />
<meta name="description" content="Java Pattern和Matcher详解 [转载]" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="../../../skin/public/js/jquery.min.js" ></script>
<script src="../../../skin/public/js/hc-sticky.js"></script>
<script src="../../../skin/public/js/comm.js"></script>
<link href="../../../skin/public/css/index.css" rel="stylesheet">
<script type="text/javascript" src="../../../skin/public/js/ajax.js"></script>
</head>
<body>
<header>
    <div class="logo">
        <h1><a href="index.html">Mr · 王</a></h1>
        <span>花若盛开，清风自来。</span>
    </div>
    <nav>
        <h2 id="mnavh"><span class="navicon"></span></h2>
        <ul id="starlist">

            <li><a href="index.html">首页</a></li>

            <li ><a href="knowledge/se.html">技术博客</a>
                <ul class="sub">
                    <li><a href="knowledge/db/db.html" >数据库</a></li>
                    <li><a href="knowledge/linux/linux.html" >Linux</a></li>
                    <li><a href="knowledge/java/java.html" >Java</a></li>
                </ul>
            </li>


            <li ><a href="life/life.html">生活杂谈</a>
                <ul class="sub">
                    <li><a href="life/we/we.html" >网络来源</a></li>
                    <li><a href="life/ez/ez.html" >随笔</a></li>
                    <li><a href="life/es/es.html" >语录</a></li>
                </ul>
            </li>


            <li ><a href="share/share.html">资源分享</a>
                <ul class="sub">
                    <li><a href="share/em/em.html" >建站那些事</a></li>
                    <li><a href="share/eb/eb.html" >Bug修复</a></li>
                    <li><a href="share/ec/ec.html" >源码分析</a></li>
                </ul>
            </li>


            <li ><a href="pe/pe.html">网站介绍</a></li>

            <li ><a href="common/about-me.html">关于我</a></li>

            <li><a href="common/time-axis.html">时间轴</a></li>

            <li><a href="common/gbook.html">留言</a></li>
        </ul>
    </nav>
</header>
<div class="blank"></div>
<aside>
  <div class="newsbox">
    <h2 class="hometitle">推荐</h2>
    <ul class="news">
<li><a href="../../linux/2018-08-08/21.html" title="Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行">Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行</a></li><li><a href="../2018-07-26/20.html" title="JaveWeb学习之Servlet（二）：ServletConfig和ServletContext">JaveWeb学习之Servlet（二）：ServletConfig和ServletContext</a></li><li><a href="../2018-07-22/19.html" title="JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制">JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制</a></li><li><a href="../2018-06-29/18.html" title="Cglib动态代理浅析">Cglib动态代理浅析</a></li><li><a href="../2018-06-29/17.html" title="JDK动态代理浅析">JDK动态代理浅析</a></li>    </ul>
  </div>
  <div class="search">
    <form action="../../../tags/search/index.htm" method="post" name="searchform" id="searchform">
      <input name="keyboard" id="keyboard" class="input_text" value="请输入关键字词" style="color: rgb(153, 153, 153);" onfocus="if(value=='请输入关键字词'){this.style.color='#000';value=''}" onblur="if(value==''){this.style.color='#999';value='请输入关键字词'}" type="text">
      <input name="show" value="title" type="hidden">
      <input name="tempid" value="1" type="hidden">
      <input name="tbname" value="news" type="hidden">
      <input name="Submit" class="input_submit" value="搜索" type="submit">
    </form>
  </div>
  <div class="newsbox">
    <h2 class="hometitle">标签云</h2>
      <ul class="cloud">
        <a href="../../../tags/tags.html" target="_blank">SVN</a> <a href="../../../tags/tags/tags_3.html" target="_blank">JavaWeb</a> <a href="../../../tags/tags/tags_6.html" target="_blank">Servlet</a> <a href="../../../tags/tags/tags_2.html" target="_blank">导出</a> <a href="../../../tags/tags/tags_5.html" target="_blank">导入</a> <a href="../../../tags/tags/tags_4.html" target="_blank">Excel</a> <a href="../../../tags/tags/tags_8.html" target="_blank">Jxl</a> <a href="../../../tags/tags/tags_9.html" target="_blank">Jar</a> <a href="../../../tags/tags/tags_7.html" target="_blank">Apache</a> <a href="../../../tags/tags/tags_12.html" target="_blank">命令</a> <a href="../../../tags/tags/tags_10.html" target="_blank">服务器</a> <a href="../../../tags/tags/tags_11.html" target="_blank">论坛</a> <a href="../../../tags/tags/tags_14.html" target="_blank">Discuz</a> <a href="../../../tags/tags/tags_24.html" target="_blank">构建</a> <a href="../../../tags/tags/tags_17.html" target="_blank">Maven</a> <a href="../../../tags/tags/tags_13.html" target="_blank">Jenkins</a> <a href="../../../tags/tags/tags_15.html" target="_blank">文件上传</a> <a href="../../../tags/tags/tags_16.html" target="_blank">Nginx</a> <a href="../../../tags/tags/tags_20.html" target="_blank">MySQL</a> <a href="../../../tags/tags/tags_18.html" target="_blank">环境</a> <a href="../../../tags/tags/tags_21.html" target="_blank">安装</a> <a href="../../../tags/tags/tags_19.html" target="_blank">PHP</a> <a href="../../../tags/tags/tags_22.html" target="_blank">Linux</a> <a href="../../../tags/tags/tags_23.html" target="_blank">JDK</a>      </ul>
  </div>
  <div class="newsbox">
    <h2 class="hometitle">阅读排行</h2>
    <ul class="news">
<li><a href="../2018-07-22/19.html" title="JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制">JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制</a></li><li><a href="../2018-06-29/18.html" title="Cglib动态代理浅析">Cglib动态代理浅析</a></li><li><a href="../2018-07-26/20.html" title="JaveWeb学习之Servlet（二）：ServletConfig和ServletContext">JaveWeb学习之Servlet（二）：ServletConfig和ServletContext</a></li><li><a href="../2018-06-29/17.html" title="JDK动态代理浅析">JDK动态代理浅析</a></li><li><a href="../2018-06-29/16.html" title="浅析Java中的final关键字">浅析Java中的final关键字</a></li><li><a href="../../linux/2018-08-08/21.html" title="Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行">Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行</a></li><li><a href="../../../life/we/2018-08-08/23.html" title="一个JAVA程序员成长之路分享 [转载]">一个JAVA程序员成长之路分享 [转载]</a></li><li><a href="../../linux/2018-06-29/12.html" title="Linux系统MySQL源码安装学习记录">Linux系统MySQL源码安装学习记录</a></li>    </ul>
  </div>
  <div class="newsbox">
    <h2 class="hometitle">友情链接</h2>
    <ul class="links">
        <li><a href="#" title="个人博客1">个人博客1</a></li><li><a href="#" title="个人博客2">个人博客2</a></li><li><a href="#" title="个人博客3">个人博客3</a></li><li><a href="#" title="个人博客4">个人博客4</a></li><li><a href="#" title="个人博客5">个人博客5</a></li>    </ul>
  </div>
</aside>
<main>
 <div class="weizhi">您现在的位置是：<a href="../../../index.html">首页</a>&nbsp;>&nbsp;<a href="../../knowledge.html">学无止境</a>&nbsp;>&nbsp;<a href="../java.html">Java</a></div>
 <div class="infosbox">
    <h1 class="infotitle">Java Pattern和Matcher详解 [转载]</h1>
    <p class="bloginfo"><span><a href='mailto:'>转载</a></span><span>2018-08-11</span><span>Java</span><span>阅读(<script src="http://www.guitu18.com/e/public/ViewClick/?classid=7&amp;id=24&amp;addclick=1"></script>)</span></p>
    <div class="tags"><a href="../../../tags/tags/tags_25.html" target="_blank">Java</a></div>
    <div class="news_about"> <strong>简介</strong> 最近玩了玩微信公众号开发之后，想写一个爬虫为公众号爬一点数据；在测试过程中，需要获取页面的所有链接，比较快捷的办法是使用正则表达式直接匹配，那么Java中的字符串正则用的是Pattern和Matcher结合，功能还是蛮强大的；我平时工作中对这两个类接触的少，具体的使用这篇博文写的很详细，转载记录一下； </div>
    <div class="news_con">
      <p>转载自：http://blog.csdn.net/cclovett/article/details/12448843/</p>
<p>结论：</p>
<blockquote>
<p>Pattern与Matcher一起合作.Matcher类提供了对正则表达式的分组支持,以及对正则表达式的多次匹配支持.<br /><strong>单独用Pattern只能使用Pattern.matches(String regex,CharSequence input)一种最基础最简单的匹配</strong>。</p></blockquote>
<p>java正则表达式通过java.util.regex包下的Pattern类与Matcher类实现(建议在阅读本文时,打开java API文档,当介绍到哪个方法时,查看java API中的方法说明,效果会更佳).</p>
<p><strong>Pattern类用于创建一个正则表达式,也可以说创建一个匹配模式,它的构造方法是私有的,不可以直接创建,但可以通过Pattern.complie(String regex)简单工厂方法创建一个正则表达式;</strong></p>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\w+&quot;); 
p.pattern();//返回 \w+ 

pattern() 返回正则表达式的字符串形式,其实就是返回Pattern.complile(String regex)的regex参数 
</code></pre>
<h3>1.Pattern.split(CharSequence input)</h3>
<p>Pattern有一个split(CharSequence input)方法,用于分隔字符串,并返回一个String[],我猜String.split(String regex)就是通过Pattern.split(CharSequence input)来实现的.</p>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\d+&quot;); 
String[] str=p.split(&quot;我的QQ是:456456我的电话是:0532214我的邮箱是:aaa@aaa.com&quot;); 

结果:str[0]=&quot;我的QQ是:&quot; str[1]=&quot;我的电话是:&quot; str[2]=&quot;我的邮箱是:aaa@aaa.com&quot; 
</code></pre>
<h3>2.Pattern.matches(String regex,CharSequence input)</h3>
<p>一个静态方法,用于快速匹配字符串,该方法适合用于只匹配一次,且匹配全部字符串.</p>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern.matches(&quot;\\d+&quot;,&quot;2223&quot;);
//返回true 
Pattern.matches(&quot;\\d+&quot;,&quot;2223aa&quot;);
//返回false,需要匹配到所有字符串才能返回true,这里aa不能匹配到 
Pattern.matches(&quot;\\d+&quot;,&quot;22bb23&quot;);
//返回false,需要匹配到所有字符串才能返回true,这里bb不能匹配到 
</code></pre>
<h3>3.Pattern.matcher(CharSequence input)</h3>
<p>说了这么多,终于轮到Matcher类登场了,Pattern.matcher(CharSequence input)返回一个Matcher对象.</p>
<p><strong>Matcher类的构造方法也是私有的,不能随意创建,只能通过Pattern.matcher(CharSequence input)方法得到该类的实例.</strong></p>
<p>Pattern类只能做一些简单的匹配操作,要想得到更强更便捷的正则匹配操作,那就需要将Pattern与Matcher一起合作.Matcher类提供了对正则表达式的分组支持,以及对正则表达式的多次匹配支持.</p>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\d+&quot;); 
Matcher m=p.matcher(&quot;22bb23&quot;); 
m.pattern();//返回p 也就是返回该Matcher对象是由哪个Pattern对象的创建的 
</code></pre>
<h3>4.Matcher.matches() / Matcher.lookingAt() / Matcher.find()</h3>
<p>Matcher类提供三个匹配操作方法,三个方法均返回boolean类型,当匹配到时返回true,没匹配到则返回false</p>
<h4>matches()对整个字符串进行匹配,只有整个字符串都匹配了才返回true</h4>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\d+&quot;); 
Matcher m=p.matcher(&quot;22bb23&quot;); 
m.matches(); //返回false,因为bb不能被\d+匹配,导致整个字符串匹配未成功. 
Matcher m2=p.matcher(&quot;2223&quot;); 
m2.matches(); //返回true,因为\d+匹配到了整个字符串 
</code></pre>
<p>我们现在回头看一下Pattern.matches(String regex,CharSequence input),它与下面这段代码等价 Pattern.compile(regex).matcher(input).matches()</p>
<h4>lookingAt()对前面的字符串进行匹配,只有匹配到的字符串在最前面才返回true</h4>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\d+&quot;); 
Matcher m=p.matcher(&quot;22bb23&quot;);
m.lookingAt(); //返回true,因为\d+匹配到了前面的22
Matcher m2=p.matcher(&quot;aa2223&quot;);
m2.lookingAt(); //返回false,因为\d+不能匹配前面的aa
</code></pre>
<h4>find()对字符串进行匹配,匹配到的字符串可以在任何位置.</h4>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\d+&quot;); 
Matcher m=p.matcher(&quot;22bb23&quot;); 
m.find(); //返回true 
Matcher m2=p.matcher(&quot;aa2223&quot;); 
m2.find(); //返回true 
Matcher m3=p.matcher(&quot;aa2223bb&quot;); 
m3.find(); //返回true 
Matcher m4=p.matcher(&quot;aabb&quot;); 
m4.find(); //返回false 
</code></pre>
<h3>5.Mathcer.start() / Matcher.end() / Matcher.group()</h3>
<p>当使用matches(),lookingAt(),find()执行匹配操作后,就可以利用以上三个方法得到更详细的信息.</p>
<p><strong>start()返回匹配到的子字符串在字符串中的索引位置.<br />end()返回匹配到的子字符串的最后一个字符在字符串中的索引位置.<br />group()返回匹配到的子字符串</strong></p>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\d+&quot;); 
Matcher m=p.matcher(&quot;aaa2223bb&quot;); 
m.find();//匹配2223 
m.start();//返回3 
m.end();//返回7,返回的是2223后的索引号 
m.group();//返回2223 

Mathcer m2=p.matcher(&quot;2223bb&quot;); 
m2.lookingAt();   //匹配2223 
m2.start();   //返回0,由于lookingAt()只能匹配前面的字符串,所以当使用lookingAt()匹配时,start()方法总是返回0 
m2.end();   //返回4 
m2.group();   //返回2223 

Matcher m3=p.matcher(&quot;2223&quot;); //如果Matcher m3=p.matcher(&quot;2223bb&quot;); 那么下面的方法出错，因为不匹配返回false
m3.matches();   //匹配整个字符串 
m3.start();   //返回0
m3.end();   //返回3,原因相信大家也清楚了,因为matches()需要匹配所有字符串 
m3.group();   //返回2223
</code></pre>
<p>说了这么多,相信大家都明白了以上几个方法的使用,该说说正则表达式的分组在java中是怎么使用的.<br />start(),end(),group()均有一个重载方法它们是start(int i),end(int i),group(int i)专用于分组操作,Mathcer类还有一个groupCount()用于返回有多少组.</p>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;([a-z]+)(\\d+)&quot;); 
Matcher m=p.matcher(&quot;aaa2223bb&quot;); 
m.find();   //匹配aaa2223 
m.groupCount();   //返回2,因为有2组 
m.start(1);   //返回0 返回第一组匹配到的子字符串在字符串中的索引号 
m.start(2);   //返回3 
m.end(1);   //返回3 返回第一组匹配到的子字符串的最后一个字符在字符串中的索引位置. 
m.end(2);   //返回7 
m.group(1);   //返回aaa,返回第一组匹配到的子字符串 
m.group(2);   //返回2223,返回第二组匹配到的子字符串 
</code></pre>
<p>现在我们使用一下稍微高级点的正则匹配操作,例如有一段文本,里面有很多数字,而且这些数字是分开的,我们现在要将文本中所有数字都取出来,利用java的正则操作是那么的简单.</p>
<blockquote>
<p>Java代码示例:</p></blockquote>
<pre>
<code>Pattern p=Pattern.compile(&quot;\\d+&quot;); 
Matcher m=p.matcher(&quot;我的QQ是:456456 我的电话是:0532214 我的邮箱是:aaa123@aaa.com&quot;); 
while(m.find()) { 
     System.out.println(m.group()); 
} 

输出: 
456456 
0532214 
123 
</code></pre>
<p>如将以上while()循环替换成</p>
<pre>
<code>while(m.find()) { 
     System.out.println(m.group()); 
     System.out.print(&quot;start:&quot;+m.start()); 
     System.out.println(&quot; end:&quot;+m.end()); 
} 

则输出: 
456456 
start:6 end:12 
0532214 
start:19 end:26 
123 
start:36 end:39 
</code></pre>
<p>现在大家应该知道,每次执行匹配操作后start(),end(),group()三个方法的值都会改变,改变成匹配到的子字符串的信息,以及它们的重载方法,也会改变成相应的信息.</p>
<p>注意:只有当匹配操作成功,才可以使用start(),end(),group()三个方法,否则会抛出java.lang.IllegalStateException,也就是当matches(),lookingAt(),find()其中任意一个方法返回true时,才可以使用.</p>    </div>
    <div class="share">
     <p class="diggit"><a href="JavaScript:makeRequest('/e/public/digg/?classid=7&id=24&dotop=1&doajax=1&ajaxarea=diggnum','EchoReturnedText','GET','');"> 很赞哦！ </a>(<b id="diggnum"><script type="text/javascript" src="http://www.guitu18.com/e/public/ViewClick/?classid=7&amp;id=24&amp;down=5"></script></b>)</p>
</div>
    <div class="nextinfo">
      <p>上一篇：<a href='../2018-07-26/20.html'>JaveWeb学习之Servlet（二）：ServletConfig和ServletContext</a></p>
      <p>下一篇：<a href='../java.html'>返回列表</a></p>
    </div>
    <div class="otherlink">
      <h2>相关文章</h2>
      <ul>
<li><a href="../../../life/we/2018-08-08/23.html" title="一个JAVA程序员成长之路分享 [转载]">一个JAVA程序员成长之路分享 [转载]</a></li><li><a href="../2018-07-26/20.html" title="JaveWeb学习之Servlet（二）：ServletConfig和ServletContext">JaveWeb学习之Servlet（二）：ServletConfig和ServletContex</a></li><li><a href="../2018-07-22/19.html" title="JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制">JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制</a></li><li><a href="../2018-06-29/18.html" title="Cglib动态代理浅析">Cglib动态代理浅析</a></li><li><a href="../2018-06-29/17.html" title="JDK动态代理浅析">JDK动态代理浅析</a></li><li><a href="../2018-06-29/16.html" title="浅析Java中的final关键字">浅析Java中的final关键字</a></li><li><a href="../2018-06-29/15.html" title="Jackson注解学习参考">Jackson注解学习参考</a></li><li><a href="../2018-06-29/13.html" title="Iterable 和 Iterator 接口学习笔记">Iterable 和 Iterator 接口学习笔记</a></li><li><a href="../2018-06-29/9.html" title="Java 使用 Jxl 实现 Excel 导入导出">Java 使用 Jxl 实现 Excel 导入导出</a></li><li><a href="../2018-06-29/8.html" title="Maven项目中添加本地jar包">Maven项目中添加本地jar包</a></li>      </ul>
    </div>
    <div class="news_pl">
      <h2>文章评论</h2>
      <div class="gbko">
        <script>
		  function CheckPl(obj)
		  {
		  if(obj.saytext.value=="")
		  {
		  alert("您没什么话要说吗？");
		  obj.saytext.focus();
		  return false;
		  }
		  return true;
		  }
		  </script><form action="../../../tags/pl/doaction.htm" method="post" name="saypl" id="saypl" onsubmit="return CheckPl(document.saypl)">
<div id="plpost">
<p class="saying"><span><a href="http://www.guitu18.com/e/pl/?classid=7&amp;id=24">共有<script type="text/javascript" src="http://www.guitu18.com/e/public/ViewClick/?classid=7&amp;id=24&amp;down=2"></script>条评论</a></span>来说两句吧...</p>
<p class="yname"><span>用户名:</span><input name="username" type="text" class="inputText" id="username" value="" size="16" /></p>
<p class="yzm"><span>验证码:</span><input name="key" type="text" class="inputText" size="16" />
<img src="http://www.guitu18.com/e/ShowKey/ShowKey.jpg" align="absmiddle" name="plKeyImg" id="plKeyImg" onclick="plKeyImg.src='/e/ShowKey/?v=pl&t='+Math.random()" title="看不清楚,点击刷新" /> </p>
<input name="nomember"  type="hidden" id="nomember" value="1" checked="checked" />
<textarea name="saytext" rows="6" id="saytext"></textarea><input name="imageField" type="submit" value="提交"/>
<input name="id" type="hidden" id="id" value="24" />
<input name="classid" type="hidden" id="classid" value="7" />
<input name="enews" type="hidden" id="enews" value="AddPl" />
<input name="repid" type="hidden" id="repid" value="0" />
<input type="hidden" name="ecmsfrom" value="/se/java/2018-08-11/24.html"></td>
</div></form>
      </div>
    </div>
  </div>
</main>
<div class="blank"></div>
<footer>
    <p>Design by <a href="../../index.html">Mr · 王</a></p>
</footer>
<a href="24.html#" class="cd-top cd-is-visible cd-fade-out">Top</a>
<script src="http://www.guitu18.com/e/public/onclick/?enews=donews&amp;classid=7&amp;id=24"></script>
<link href="../../../skin/highlight/styles/monokai-sublime.css" rel="stylesheet">
<script src="../../../skin/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
